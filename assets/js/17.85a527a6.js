(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{355:function(a,s,t){"use strict";t.r(s);var e=t(4),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"部署声明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署声明"}},[a._v("#")]),a._v(" 部署声明")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("名称")]),a._v(" "),s("th",[a._v("版本")]),a._v(" "),s("th",[a._v("IP")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("Nacos")]),a._v(" "),s("td",[a._v("2.0.3")]),a._v(" "),s("td",[a._v("192.168.10.99")])]),a._v(" "),s("tr",[s("td",[a._v("MySQL")]),a._v(" "),s("td",[a._v("8.0.27")]),a._v(" "),s("td",[a._v("192.168.10.98")])])])]),a._v(" "),s("h2",{attrs:{id:"官方链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#官方链接"}},[a._v("#")]),a._v(" 官方链接")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("名称")]),a._v(" "),s("th",[a._v("地址")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("官方文档")]),a._v(" "),s("td",[s("a",{attrs:{href:"https://nacos.io/zh-cn/docs",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://nacos.io/zh-cn/docs"),s("OutboundLink")],1)])]),a._v(" "),s("tr",[s("td",[a._v("源码仓库")]),a._v(" "),s("td",[s("a",{attrs:{href:"https://github.com/alibaba/nacos",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/alibaba/nacos"),s("OutboundLink")],1)])])])]),a._v(" "),s("h2",{attrs:{id:"数据库创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库创建"}},[a._v("#")]),a._v(" 数据库创建")]),a._v(" "),s("p",[s("strong",[a._v("1.创建用户和授权(可忽略)")])]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 降低MySQL密码策略等级")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("global")]),a._v(" validate_password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("length"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("global")]),a._v(" validate_password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("special_char_count"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("global")]),a._v(" validate_password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("policy "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("LOW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建用户")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("create")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("user")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'nacos'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("@'%'")]),a._v(" IDENTIFIED "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("BY")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'nacos'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 授权")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("grant")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("all")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("privileges")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("on")]),a._v(" nacos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" nacos"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("@'%'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\nflush "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("privileges")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[s("strong",[a._v("2. 创建Nacos数据库")])]),a._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DATABASE")]),a._v(" nacos "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CHARACTER")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("SET")]),a._v(" utf8 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("COLLATE")]),a._v(" utf8_bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),s("p",[s("strong",[a._v("3. 导入nacos表结构")])]),a._v(" "),s("p",[a._v("Nacos表结构脚本在线地址："),s("a",{attrs:{href:"https://github.com/alibaba/nacos/blob/master/config/src/main/resources/META-INF/nacos-db.sql",target:"_blank",rel:"noopener noreferrer"}},[a._v("nacos-db.sql"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"nacos部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nacos部署"}},[a._v("#")]),a._v(" Nacos部署")]),a._v(" "),s("p",[s("strong",[a._v("1. 创建目录")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建日志挂载目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /var/log/nacos\n")])])]),s("p",[s("strong",[a._v("2. 下载镜像")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nacos/nacos-server:2.0.3\n")])])]),s("p",[s("strong",[a._v("3. 创建和启动容器")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nacos "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("host "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MODE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("standalone "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JVM_XMS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("256m "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JVM_XMX")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("512m "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("SPRING_DATASOURCE_PLATFORM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_HOST")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".10.98 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_DB_NAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nacos "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_USER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nacos "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nacos "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_DATABASE_NUM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_SERVICE_DB_PARAM")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=true&serverTimezone=UTC"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /var/log/nacos:/home/nacos/logs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nnacos/nacos-server:2.0.3\n")])])]),s("p",[s("strong",[a._v("4. 访问控制台")])]),a._v(" "),s("p",[a._v("控制台地址： "),s("a",{attrs:{href:"http://192.168.10.99:8848/nacos",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://192.168.10.99:8848/nacos"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("默认用户名/密码：nacos/nacos")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2022/05/04/nG8ZJqkXQjYEM5r.png",alt:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);