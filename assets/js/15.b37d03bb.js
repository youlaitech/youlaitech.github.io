(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{353:function(a,s,t){"use strict";t.r(s);var e=t(4),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"_1-镜像搜索"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-镜像搜索"}},[a._v("#")]),a._v(" 1. 镜像搜索")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" search redis\n")])])]),s("h2",{attrs:{id:"_2-镜像下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-镜像下载"}},[a._v("#")]),a._v(" 2. 镜像下载")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull redis:latest\n")])])]),s("h2",{attrs:{id:"_3-创建目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-创建目录"}},[a._v("#")]),a._v(" 3. 创建目录")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /mnt/redis/data\n")])])]),s("h2",{attrs:{id:"_4-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置文件"}},[a._v("#")]),a._v(" 4. 配置文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("touch /mnt/redis/redis.conf\n")])])]),s("p",[a._v("官网获取 "),s("code",[a._v("redis.conf")]),a._v(" : "),s("a",{attrs:{href:"http://www.redis.cn/download.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://www.redis.cn/download.html"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("img",{attrs:{src:"https://oss.youlai.tech/blog/20221004183446.png",alt:""}})]),a._v(" "),s("p",[a._v("解压后可在根目录查看到 "),s("code",[a._v("redis.conf")]),a._v(" 配置文件，将其内容复制到 "),s("code",[a._v("/mnt/redis/redis.conf")]),a._v("，然后修改以下内容：")]),a._v(" "),s("ul",[s("li",[a._v("bind 127.0.0.1  ： 注释掉，redis可以外部访问")]),a._v(" "),s("li",[a._v('--requirepass "123456" ： 设置Redis密码为123456，默认无密码')]),a._v(" "),s("li",[a._v("--appendonly yes ： AOF持久化")]),a._v(" "),s("li",[a._v("tcp-keepalive 60 ： 默认300，调小防止远程主机强迫关闭一个现有连接错误")])]),a._v(" "),s("h2",{attrs:{id:"_5-启动容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动容器"}},[a._v("#")]),a._v(" 5. 启动容器")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("redis  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v(":6379 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /mnt/redis/redis.conf:/etc/redis/redis.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /mnt/redis/data:/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nredis:latest redis-server /etc/redis/redis.conf \n")])])]),s("p",[a._v("-- /etc/redis/redis.conf 指定配置文件，是容器内的配置目录，挂载宿主机文件为上文配置的 "),s("code",[a._v("/mnt/redis/redis.conf")]),a._v(" 的文件")])])}),[],!1,null,null,null);s.default=r.exports}}]);