(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{351:function(s,a,t){"use strict";t.r(a);var e=t(4),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-卸载-podman"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载-podman"}},[s._v("#")]),s._v(" 1. 卸载 podman")]),s._v(" "),a("p",[s._v("CentOS8 默认安装了 podman，安装 Docker 会有冲突，需要先卸载 podman")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" erase "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("podman")]),s._v(" buildah\n")])])]),a("h2",{attrs:{id:"_2-安装依赖包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装依赖包"}},[s._v("#")]),s._v(" 2. 安装依赖包")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils device-mapper-persistent-data lvm2\n")])])]),a("h2",{attrs:{id:"_3-配置镜像源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置镜像源"}},[s._v("#")]),s._v(" 3. 配置镜像源")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum config-manager --add-repo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])])]),a("h2",{attrs:{id:"_4-docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker安装"}},[s._v("#")]),s._v(" 4. Docker安装")]),s._v(" "),a("p",[a("strong",[s._v("1. 安装 containerd")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" containerd.io "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--allowerasing")]),s._v("\n")])])]),a("p",[a("strong",[s._v("2. 安装 Docker Engine-Community")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 搜索存储库中可用的版本，按照版本号从高到低排序")]),s._v("\nyum list docker-ce "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--showduplicates")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/03/xOchs7tqaEHYvu8.png",alt:""}})]),s._v(" "),a("p",[s._v("安装可用版本的docker-ce")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" docker-ce-3:20.10.3-3.el8\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[a("strong",[s._v("版本查看")])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装完成后查看Docker版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version\n")])])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/11/30/dB31eynIArSmWjH.png",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("strong",[s._v("设置开机自启")])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[a("strong",[s._v("启动 Docker")])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])])]),a("h2",{attrs:{id:"_5-配置镜像加速器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置镜像加速器"}},[s._v("#")]),s._v(" 5. 配置镜像加速器")]),s._v(" "),a("p",[s._v("镜像文件一般都很大，如果觉得镜像下载比较慢可配置镜像加速器。")]),s._v(" "),a("p",[s._v("阿里云镜像加速器获取地址：    https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors")]),s._v(" "),a("p",[s._v("直接完整复制以下命令执行：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /etc/docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://g6jp4cfd.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n\n")])])]),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2022/05/03/5nYxwUlqPGkShJo.png",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);