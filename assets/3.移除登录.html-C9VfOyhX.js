import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,f as n,a,b as i,d as h,e as p,r,o as k}from"./app-CLGQiloA.js";const d={};function o(g,s){const t=r("RouteLink");return k(),l("div",null,[s[7]||(s[7]=n('<div class="hint-container info"><p class="hint-container-title"><strong>简介</strong></p><p>本节讲解如何在 <a href="https://gitee.com/youlaiorg/vue3-element-admin" target="_blank" rel="noopener noreferrer">vue3-element-admin</a> 中<strong>移除登录限制</strong>。在一些场景下，如<strong>数据大屏</strong>或<strong>简单内容展示</strong>，登录功能可能是多余的。本节将详细介绍如何<strong>移除强制登录</strong>的逻辑。</p></div><h2 id="_1-前提条件" tabindex="-1"><a class="header-anchor" href="#_1-前提条件"><span>1. <strong>前提条件</strong></span></a></h2>',2)),a("p",null,[s[1]||(s[1]=i("移除登录通常与")),s[2]||(s[2]=a("strong",null,"静态路由",-1)),s[3]||(s[3]=i("相关，如果仍然依赖动态路由，移除登录就没有意义。因此，建议")),s[4]||(s[4]=a("strong",null,"先移除动态路由",-1)),s[5]||(s[5]=i("，具体参考：")),h(t,{to:"/vue3-element-admin/5.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/2.%E7%A7%BB%E9%99%A4%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1.html"},{default:p(()=>s[0]||(s[0]=[i("移除动态路由")])),_:1}),s[6]||(s[6]=i("。"))]),s[8]||(s[8]=n(`<h2 id="_2-修改路由守卫" tabindex="-1"><a class="header-anchor" href="#_2-修改路由守卫"><span>2. <strong>修改路由守卫</strong></span></a></h2><p>在 <code>src/plugins/permission.ts</code> 中，修改 <code>router.beforeEach</code>，<strong>移除登录校验</strong>，完整代码如下：</p><div class="language-ts line-numbers-mode" data-highlighter="shiki" data-ext="ts" data-title="src/plugins/permission.ts" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// src/plugins/permission.ts</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> NProgress</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;@/utils/nprogress&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> router</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;@/router&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">usePermissionStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;@/store&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setupPermission</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 前置守卫</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">beforeEach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">async</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">to</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">next</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    NProgress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 生成路由菜单</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    usePermissionStore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">generateRoutes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">to</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">matched</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      next</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/404&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 路由未匹配，跳转404</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      next</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 后置守卫</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  router</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">afterEach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    NProgress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">done</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-测试免登录" tabindex="-1"><a class="header-anchor" href="#_3-测试免登录"><span>3. <strong>测试免登录</strong></span></a></h2><p>完成上述修改后，<strong>首页可直接访问</strong>，不再强制跳转到登录页。但请确保后端接口允许<strong>未登录访问</strong>。</p><p><img src="https://www.youlai.tech/storage/blog/2025/02/09/20250209233523.png" alt="" loading="lazy"></p>`,6))])}const y=e(d,[["render",o],["__file","3.移除登录.html.vue"]]),c=JSON.parse('{"path":"/vue3-element-admin/5.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/3.%E7%A7%BB%E9%99%A4%E7%99%BB%E5%BD%95.html","title":"移除登录","lang":"zh-CN","frontmatter":{"title":"移除登录","icon":"list","order":3,"category":["开发指南"],"tag":["移除登录"],"description":"简介 本节讲解如何在 vue3-element-admin 中移除登录限制。在一些场景下，如数据大屏或简单内容展示，登录功能可能是多余的。本节将详细介绍如何移除强制登录的逻辑。 1. 前提条件 移除登录通常与静态路由相关，如果仍然依赖动态路由，移除登录就没有意义。因此，建议先移除动态路由，具体参考：。 2. 修改路由守卫 在 src/plugins/p...","head":[["meta",{"property":"og:url","content":"https://www.youlai.tech/vue3-element-admin/5.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/3.%E7%A7%BB%E9%99%A4%E7%99%BB%E5%BD%95.html"}],["meta",{"property":"og:site_name","content":"youlai"}],["meta",{"property":"og:title","content":"移除登录"}],["meta",{"property":"og:description","content":"简介 本节讲解如何在 vue3-element-admin 中移除登录限制。在一些场景下，如数据大屏或简单内容展示，登录功能可能是多余的。本节将详细介绍如何移除强制登录的逻辑。 1. 前提条件 移除登录通常与静态路由相关，如果仍然依赖动态路由，移除登录就没有意义。因此，建议先移除动态路由，具体参考：。 2. 修改路由守卫 在 src/plugins/p..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://www.youlai.tech/storage/blog/2025/02/09/20250209233523.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-23T10:13:19.000Z"}],["meta",{"property":"article:tag","content":"移除登录"}],["meta",{"property":"article:modified_time","content":"2025-02-23T10:13:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"移除登录\\",\\"image\\":[\\"https://www.youlai.tech/storage/blog/2025/02/09/20250209233523.png\\"],\\"dateModified\\":\\"2025-02-23T10:13:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"有来技术\\",\\"url\\":\\"https://gitee.com/youlaiorg\\"}]}"]]},"headers":[{"level":2,"title":"1. 前提条件","slug":"_1-前提条件","link":"#_1-前提条件","children":[]},{"level":2,"title":"2. 修改路由守卫","slug":"_2-修改路由守卫","link":"#_2-修改路由守卫","children":[]},{"level":2,"title":"3. 测试免登录","slug":"_3-测试免登录","link":"#_3-测试免登录","children":[]}],"git":{"createdTime":1739119673000,"updatedTime":1740305599000,"contributors":[{"name":"Ray.Hao","username":"Ray.Hao","email":"1490493387@qq.com","commits":2,"url":"https://github.com/Ray.Hao"}]},"readingTime":{"minutes":0.97,"words":290},"filePathRelative":"vue3-element-admin/5.开发指南/3.移除登录.md","localizedDate":"2025年2月9日","autoDesc":true}');export{y as comp,c as data};
