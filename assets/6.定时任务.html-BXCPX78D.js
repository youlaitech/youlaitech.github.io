import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,f as s,o as t}from"./app-COtptlEf.js";const l={};function n(o,i){return t(),a("div",null,i[0]||(i[0]=[s(`<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>本节主要介绍如何配置和使用 XXL-JOB。如果您尚未安装 XXL-JOB，或者需要从零开始了解安装过程，请参考这篇文章：<a href="https://youlai.blog.csdn.net/article/details/134159913" target="_blank" rel="noopener noreferrer">Spring Boot 3 整合 XXL-JOB 实现分布式定时任务调度</a>。</p><p>XXL-JOB 包含两个主要角色：<strong>调度器</strong> 和 <strong>执行器</strong>。调度器是服务端，用于管理任务调度；执行器是应用端，用于执行任务的具体逻辑。</p><ul><li><code>XXL-JOB</code> 控制台地址： <a href="http://localhost:8080/xxl-job-admin" target="_blank" rel="noopener noreferrer">http://localhost:8080/xxl-job-admin</a></li><li>用户名/密码： admin/123456</li></ul><p><img src="https://www.youlai.tech/storage/blog/2025/02/24/26e69b5d5fd1225fa07bb8ddd7f2b974.png" alt="XXL-JOB 控制台" loading="lazy"></p><h2 id="修改配置" tabindex="-1"><a class="header-anchor" href="#修改配置"><span>修改配置</span></a></h2><p>XXL-JOB 的定时任务默认是关闭的。请根据下图修改配置：</p><ol><li>将 <code>xxl.job.enabled</code> 设置为 <code>true</code>。</li><li>调整调度中心地址为实际安装地址，其它配置可保持默认。</li></ol><p><img src="https://www.youlai.tech/storage/blog/2025/02/24/e8710e994d726e54f242bcb7ade8e153.png" alt="" loading="lazy"></p><h2 id="添加执行器" tabindex="-1"><a class="header-anchor" href="#添加执行器"><span>添加执行器</span></a></h2><p>在 <code>application-dev.yml</code> 中，执行器的应用名称 (<code>xxl.job.executor.appname</code>) 默认配置为： <code>xxl-job-executor-\${spring.application.name}</code>，其中 <code>\${spring.application.name}</code> 会解析为当前应用名称。例如，在 <code>youlai-boot</code> 项目中，<code>appname</code> 将解析为 <code>xxl-job-executor-youlai-boot</code>。</p><p><strong>操作步骤</strong>：</p><ol><li><p>在 XXL-JOB 控制台中，添加执行器，<code>appname</code> 配置为 <code>xxl-job-executor-youlai-boot</code>。</p><p><img src="https://www.youlai.tech/storage/blog/2025/02/24/a94e4829446b4936b613d6b9839548b7.png" alt="" loading="lazy"></p></li><li><p>因为采用的是<strong>自动注册</strong>方式，重启 <code>youlai-boot</code> 应用后，再刷新执行器列表，可以看到机器已成功注册。<img src="https://i-blog.csdnimg.cn/img_convert/7d0591e5ee937b6678b056f00e4189be.png" alt="" loading="lazy"></p></li></ol><h2 id="添加任务" tabindex="-1"><a class="header-anchor" href="#添加任务"><span>添加任务</span></a></h2><p>在 <code>youlai-boot</code> 应用中，添加任务执行逻辑。以下是示例代码：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">package</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> com.youlai.boot.system.handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * xxl-job 测试示例（Bean模式）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> XxlJobSampleHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">XxlJob</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;demoJobHandler&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> demoJobHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;XXL-JOB, Hello World.&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>配置任务</strong>：</p><ol><li>在 XXL-JOB 控制台中，进入“任务管理”页面，选择新增任务。</li><li>选择刚刚创建的 <code>youlai-boot</code> 应用对应的<strong>执行器</strong>。</li><li>配置 Cron 表达式来设定任务执行时间和频率。</li><li>设置任务模式为 <strong>Bean 模式</strong>，调用 Spring 容器中的 Bean，其中 Bean 名称为 <code>@XxlJob(&quot;demoJobHandler&quot;)</code> 中定义的 <code>demoJobHandler</code>。</li></ol><p><img src="https://www.youlai.tech/storage/blog/2025/02/24/2790f1145b3d4f13929cc6abd7044bcc.png" alt="" loading="lazy"></p><h2 id="定时任务测试" tabindex="-1"><a class="header-anchor" href="#定时任务测试"><span>定时任务测试</span></a></h2><p>任务创建完成后，可以在“操作”列中选择<strong>启动</strong>进行测试。</p><p><strong>注意事项</strong>： 调度器和执行器需要在网络上互通。如果调度器部署在云服务器上，而执行器运行在本地，则无法正常运行。建议将应用也部署到云服务器。</p><p><img src="https://www.youlai.tech/storage/blog/2025/02/24/54de68219a03c363b0b5ee2e3de1163b.png" alt="" loading="lazy"></p><p>启动任务后，可以查看应用控制台日志，验证任务是否正确执行。</p><p><img src="https://www.youlai.tech/storage/blog/2025/02/24/b4e51649b223dde14295e7b3a61b7aa1.png" alt="" loading="lazy"></p>`,25)]))}const d=e(l,[["render",n],["__file","6.定时任务.html.vue"]]),h=JSON.parse('{"path":"/youlai-boot/3.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/6.%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html","title":"定时任务","lang":"zh-CN","frontmatter":{"title":"定时任务","icon":"list","order":6,"category":["开发指南"],"tag":["定时任务","xxl-job"],"description":"简介 本节主要介绍如何配置和使用 XXL-JOB。如果您尚未安装 XXL-JOB，或者需要从零开始了解安装过程，请参考这篇文章：Spring Boot 3 整合 XXL-JOB 实现分布式定时任务调度。 XXL-JOB 包含两个主要角色：调度器 和 执行器。调度器是服务端，用于管理任务调度；执行器是应用端，用于执行任务的具体逻辑。 XXL-JOB 控制...","head":[["meta",{"property":"og:url","content":"https://www.youlai.tech/youlai-boot/3.%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97/6.%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1.html"}],["meta",{"property":"og:site_name","content":"youlai"}],["meta",{"property":"og:title","content":"定时任务"}],["meta",{"property":"og:description","content":"简介 本节主要介绍如何配置和使用 XXL-JOB。如果您尚未安装 XXL-JOB，或者需要从零开始了解安装过程，请参考这篇文章：Spring Boot 3 整合 XXL-JOB 实现分布式定时任务调度。 XXL-JOB 包含两个主要角色：调度器 和 执行器。调度器是服务端，用于管理任务调度；执行器是应用端，用于执行任务的具体逻辑。 XXL-JOB 控制..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://www.youlai.tech/storage/blog/2025/02/24/26e69b5d5fd1225fa07bb8ddd7f2b974.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-23T16:44:32.000Z"}],["meta",{"property":"article:tag","content":"定时任务"}],["meta",{"property":"article:tag","content":"xxl-job"}],["meta",{"property":"article:modified_time","content":"2025-02-23T16:44:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"定时任务\\",\\"image\\":[\\"https://www.youlai.tech/storage/blog/2025/02/24/26e69b5d5fd1225fa07bb8ddd7f2b974.png\\",\\"https://www.youlai.tech/storage/blog/2025/02/24/e8710e994d726e54f242bcb7ade8e153.png\\",\\"https://www.youlai.tech/storage/blog/2025/02/24/a94e4829446b4936b613d6b9839548b7.png\\",\\"https://i-blog.csdnimg.cn/img_convert/7d0591e5ee937b6678b056f00e4189be.png\\",\\"https://www.youlai.tech/storage/blog/2025/02/24/2790f1145b3d4f13929cc6abd7044bcc.png\\",\\"https://www.youlai.tech/storage/blog/2025/02/24/54de68219a03c363b0b5ee2e3de1163b.png\\",\\"https://www.youlai.tech/storage/blog/2025/02/24/b4e51649b223dde14295e7b3a61b7aa1.png\\"],\\"dateModified\\":\\"2025-02-23T16:44:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"有来技术\\",\\"url\\":\\"https://gitee.com/youlaiorg\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"修改配置","slug":"修改配置","link":"#修改配置","children":[]},{"level":2,"title":"添加执行器","slug":"添加执行器","link":"#添加执行器","children":[]},{"level":2,"title":"添加任务","slug":"添加任务","link":"#添加任务","children":[]},{"level":2,"title":"定时任务测试","slug":"定时任务测试","link":"#定时任务测试","children":[]}],"git":{"createdTime":1740305599000,"updatedTime":1740329072000,"contributors":[{"name":"Ray.Hao","username":"Ray.Hao","email":"1490493387@qq.com","commits":2,"url":"https://github.com/Ray.Hao"}]},"readingTime":{"minutes":2.09,"words":627},"filePathRelative":"youlai-boot/3.开发指南/6.定时任务.md","localizedDate":"2025年2月23日","autoDesc":true}');export{d as comp,h as data};
